# Rule: 异常知识库同步更新规范

## 触发场景
1. 当你修复了用户报告的程序异常、Bug 或逻辑漏洞。
2. 用户已明确确认修复效果达成（通过对话确认或测试通过）。

## 执行指令
当满足上述场景时，必须执行以下标准化操作：

### 1. 规范对齐
- 首先读取 `.knowledge-base/` 目录下的异常处理记录文档说明（如 `README.md` 或 `guide.md`）。
- 严格遵循文档中定义的 Markdown 格式、标题层级和必填字段。

### 2. 内容提取
从当前对话上下文中提取并整理以下信息：
- **异常现象**：用户描述的问题表现及相关的 Error Stack Trace。
- **定位过程**：简述排查思路及定位到的核心代码位置。
- **解决方案**：记录最终修复的代码逻辑（附带关键代码片段）。
- **验证结果**：记录用户确认修复的反馈。

### 3. 知识库更新
- **定位文件**：在 `.knowledge-base/` 中寻找对应的分类文档（如 `network.md`, `database.md` 等）。
- **追加记录**：将整理好的信息以“新增案例”形式追加到文档末尾或指定位置。
- **关联引用**：如涉及新的 API 变动或配置修改，需在记录中通过相对路径链接到相关代码文件。

### 4. 确认汇报
更新完成后，向用户发送一条简短通知：
> "✅ 知识库已同步：已按照规范将本次 [异常名称] 的修复经验记录至 `.knowledge-base/` 目录中，以便后续追溯。"

## 注意事项
- 禁止生成与已有规范格式冲突的内容。
- 如果 `.knowledge-base` 目录不存在或规范文档缺失，请先询问用户是否需要初始化该目录。
