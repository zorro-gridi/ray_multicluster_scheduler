# 参数丢失追踪（Parameter Loss Tracing）

## 目标
定位参数在调用链中“消失、变空、被覆盖”的具体位置和原因。

## 适用场景
- 上游传了参数，下游却收不到
- 参数值变成 None / null / 空字符串
- 参数结构被错误覆盖或裁剪

## 方法论步骤

1. **定义关键参数清单**
   - 明确哪些参数是“必须存在”的
   - 标记其类型、格式、约束条件

2. **沿调用链打点追踪**
   - 在每一层函数入口与出口打印参数
   - 建议统一格式，如：
     ```json
     param_name=xxx, type=..., value=...
     ```

3. **检查三类风险点**
   - 参数重命名（字段名不一致）
   - 参数浅拷贝/深拷贝错误
   - 参数被默认值覆盖

4. **定位丢失或变形节点**
   - 找到参数首次异常的位置
   - 回溯该函数的赋值/映射/解析逻辑

## 常用工具
- 请求日志结构化打印
- Debugger Watch
- Schema 校验（如 Pydantic / Marshmallow）

## 核心原则
> ❗ 参数“第一次变错”的地方，就是 bug 的真正源头。
